<%= ERB.new(File.read("#{ENV['APP_APP_DIR']}/config/src/logstash-common-filters.conf.erb")).result(binding) %>

input {
    file {
        type => "elasticsearch"
        path => [
            "<%= ENV['APP_LOG_DIR'] %>/elasticsearch/elasticsearch.log"
        ]
    }

    file {
        type => "nginx_combined"
        path => "<%= ENV['APP_LOG_DIR'] %>/nginx-access.log"
    }
}

output {
    stdout { debug => true debug_format => "json"}
    elasticsearch_http {
        flush_size => 1
    }
}
